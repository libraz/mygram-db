# MygramDB Environment Variables Template
# Copy this file to .env and customize for your environment

# ============================================================================
# MySQL Configuration
# ============================================================================
MYSQL_HOST=mysql
MYSQL_PORT=3306
MYSQL_USER=repl_user
MYSQL_PASSWORD=your_secure_password_here
MYSQL_DATABASE=mydb
MYSQL_USE_GTID=true
MYSQL_CONNECT_TIMEOUT_MS=3000

# MySQL Root Password (for MySQL container initialization)
MYSQL_ROOT_PASSWORD=root_secure_password_here

# ============================================================================
# Table Configuration
# ============================================================================
TABLE_NAME=articles
TABLE_PRIMARY_KEY=id
TABLE_TEXT_COLUMN=content
TABLE_NGRAM_SIZE=2
TABLE_KANJI_NGRAM_SIZE=1

# ============================================================================
# Replication Configuration
# ============================================================================
REPLICATION_ENABLE=true
# IMPORTANT: Generate a unique server_id for each MygramDB instance
REPLICATION_SERVER_ID=12345
REPLICATION_START_FROM=snapshot

# ============================================================================
# Build Configuration
# ============================================================================
BUILD_BATCH_SIZE=5000
BUILD_PARALLELISM=2

# ============================================================================
# Memory Management
# ============================================================================
MEMORY_HARD_LIMIT_MB=8192
MEMORY_SOFT_TARGET_MB=4096
MEMORY_NORMALIZE_NFKC=true
MEMORY_NORMALIZE_WIDTH=narrow
MEMORY_NORMALIZE_LOWER=false

# ============================================================================
# Snapshot Configuration
# ============================================================================
SNAPSHOT_DIR=/var/lib/mygramdb/snapshots
SNAPSHOT_INTERVAL_SEC=600
SNAPSHOT_RETAIN=3

# ============================================================================
# API Server Configuration
# ============================================================================
API_BIND=0.0.0.0
API_PORT=11016

# ============================================================================
# Logging Configuration
# ============================================================================
LOG_LEVEL=info
LOG_JSON=true

# ============================================================================
# Docker Compose Configuration
# ============================================================================
# MygramDB version/tag
MYGRAMDB_VERSION=latest

# Compose project name
COMPOSE_PROJECT_NAME=mygramdb
